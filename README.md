# Данные о продажах и контрактах.

### Перед началом запуска программы, необходимо выставить время для запуска процесса в классе UpdateStateProcess

* В качестве процесса, который запускается в определённое время использую Spring Scheduling  **@Scheduled** 

* **@Scheduled(cron = "0 05 16 * * * ")** секунды, минуты, часы соответственно, для запуска определённого процесса на Java

#

```
  Иерархия классов
```

![Иерархия классов](images/diagram_update.jpg)

#

* В предыдущем решении для каждого правила  необходимо было создавать отдельный класс, который наследовался от абстрактного класса.
Отличия реализаций старого решения были в наборе параметров и было принято решение отказаться от абстрактного класса, чтобы  настраивать правила с помощью set-методов в самом классе UpdateStateProcess.  

* Для создания нового правила, необходимо в список List<Rule> rules (список правил) добавить экземпляры классов реализующих интерфейс Rule.
* Наследник Rule должен реализовывать 2 метода
    - boolean validate()  - проверяет на корректную настройку правил (Например для StateChangeRule необходимо ограничение хотя бы с одной стороны и должен быть указан статус) для предотвращения порчи данных.
    - void apply(JdbcTemplate jdbcTemplate) - выполняет бизнес логику. 
* Обновление сделано через batchUpdate - для перехвата возможных ошибок во время обновления и ускорения по сравнению с предыдущим решением.
   - Также добавлена обработка исключения в случае непредвиденной работы приложения. 

#
База генерируется при запуске приложения, создаётся 100 000 записей.
